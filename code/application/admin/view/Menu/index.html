{extend name="Public/base" /}
{block name="body"}
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption"><i class="fa fa-globe"></i>菜单管理</div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
 
                    <a href="javascript:;" class="reload"></a>
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-toolbar">
                    <div class="btn-group">
                        <a class="btn green" href="{:url('add')}">新 增</a>
                     	<button class="btn default btn-return green" onclick="javascript:history.back(-1);return false;">返 回</button>
                    </div>
                </div>
                <div id="sample_wrapper" class="dataTables_wrapper form-inline" role="grid">
                    <div class="row">
                        <div class="col-md-6 col-sm-12">

                        </div>
                        <div class="col-md-12 col-sm-12">

                        </div>
                    </div>
                    <div class="table-scrollable">
                        <table class="table table-striped table-bordered table-hover dataTable" id="sample">
                            <thead>
                            <tr role="row">
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="ID: activate to sort column ascending" style="width: 64px;">ID</th>
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="名称: activate to sort column ascending" style="width: 95px;">名称</th>
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="上级菜单: activate to sort column ascending" style="width: 159px;">上级菜单</th>

                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="URL: activate to sort column ascending" style="width: 317px;">URL</th>
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="是否顶部显示: activate to sort column ascending" style="width: 96px;">是否顶部显示</th>
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="排序: activate to sort column ascending" style="width: 95px;">排序</th>
                               
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="隐藏: activate to sort column ascending" style="width: 96px;">是否显示</th>
                                <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample" rowspan="1" colspan="1" aria-label="操作: activate to sort column ascending" style="width: 136px;">操作</th>
                            </tr>
                            </thead>

                            <tbody role="alert" aria-live="polite" aria-relevant="all">
                            {volist name="data" id="vo"}
                            <tr class="gradeX odd">
                                <td class=" ">{$vo.id}</td>
                                <td class=" ">
                                    <a href="/Admin/Menu/index/id/{$vo.id}">{$vo.title}</a>
                                </td>
                                <td class=" ">{:superior($vo['pid'])}</td>
                              
                                <td class=" ">{$vo.url}</td>
                                 <td class=" " ><a href='javascript:;' onclick="hide({$vo['id']},{$vo['is_top_show']},'is_top_show')">{if condition="$vo['is_top_show'] eq 1"}显示{else/}隐藏{/if}</a></td>
                                <td class=" ">{$vo.sort}</td>
                               	
                                <td class=" " ><a href='javascript:;' onclick="hide({$vo['id']},{$vo['is_show']},'is_show')">{if condition="$vo['is_show'] eq 1"}显示{else/}隐藏{/if}</a></td>
                                <td class=" ">
                                    <a title="编辑" href="{:url('edit',['id'=>$vo['id']])}">编辑</a>
                                    <a class="confirm ajax-get" onclick="return confirm('确定删除？')" title="删除" href="{:url('delete',['id'=>$vo['id'],'pid'=>$vo['pid']])}">删除</a>
                                </td>
                            </tr>
                            {/volist}
                            </tbody>
                            
                        </table>
       
                        <div class="col-md-12">
							{$page}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5 col-sm-12">

                        </div>
                        <div class="col-md-7 col-sm-12">

                        </div>
                    </div>
                </div>

                <!-- 分页 -->
                <div class="page">
                </div>

            </div>
        </div>
        <!-- END EXAMPLE TABLE PORTLET-->
    </div>
</div>
{/block}
{block name="script"}
<script type="text/javascript">
function hide(id,state,field){
	var new_state=state==1?2:1;
	var table='geek_menu';
	$.ajax({
        type: "POST",
        url: "{:url('hide')}",
        data: {
        	table:table,
        	id:id,
        	state:new_state,
        	field:field
        },
        success: function (data) {
        	if(data===true){
        		location.reload();
        	}else{
        		alert('操作失败');
        	}
		},
	});
}
</script>
{/block} 
